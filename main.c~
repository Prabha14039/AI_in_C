#include<stdlib.h>
#include<stdio.h>
#include<time.h>
float dataset[][2]=
{   {0,0},
    {1,2},
    {2,4},
    {3,6},
    {4,8},
};
#define train_count (sizeof(dataset)/sizeof(dataset[0]))
float rand_float(void)
{
    return (float) rand()/(float) RAND_MAX;
}
float cost(float w)
{
  float result=0.0;
  for(size_t i=0 ; i<train_count ; i++)
    {
        float x=dataset[i][0];
        float y=x*w;
        float error = y-dataset[i][1];
        result+=error*error;
    }
  result/=train_count;
  return result;
}
int main()
{
    srand(69);
    //srand(time(0));
    float eps=1e-3;
    //y=w*x;
    float w=rand_float()*10.0f;
    printf("%f\n",cost(w));
    printf("%f\n",cost(w-eps));
    printf("%f",cost(w-2*eps));
    return 0;
}
